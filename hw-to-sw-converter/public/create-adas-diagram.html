<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAS Hardware Block Diagram Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
        }
        #diagram-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .instructions {
            background: #e3f2fd;
            border: 1px solid #1976d2;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
            max-width: 600px;
        }
    </style>
</head>
<body>
    <h1>ADAS Hardware Block Diagram</h1>
    
    <div class="instructions">
        <h3>Instructions:</h3>
        <ol>
            <li>Click "Download as PNG" to save the diagram</li>
            <li>Use this diagram with the ADAS requirements file</li>
            <li>This simplified diagram will produce a clean, readable software architecture</li>
        </ol>
    </div>

    <div id="diagram-container">
        <svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="800" height="500" fill="white"/>
            
            <!-- Title -->
            <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
                ADAS Hardware Architecture
            </text>
            
            <!-- Main Components -->
            
            <!-- ADAS ECU (Central) -->
            <rect x="350" y="200" width="150" height="80" fill="#e3f2fd" stroke="#1565c0" stroke-width="2"/>
            <text x="425" y="230" font-size="14" font-weight="bold" text-anchor="middle">ADAS ECU</text>
            <text x="425" y="250" font-size="12" text-anchor="middle">Processor Unit</text>
            <text x="425" y="265" font-size="10" text-anchor="middle">(Nvidia/Mobileye)</text>
            
            <!-- Front Camera -->
            <rect x="100" y="80" width="120" height="60" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
            <text x="160" y="105" font-size="14" font-weight="bold" text-anchor="middle">Front Camera</text>
            <text x="160" y="125" font-size="11" text-anchor="middle">2MP @ 30fps</text>
            
            <!-- Radar Sensor -->
            <rect x="100" y="170" width="120" height="60" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
            <text x="160" y="195" font-size="14" font-weight="bold" text-anchor="middle">Radar Sensor</text>
            <text x="160" y="215" font-size="11" text-anchor="middle">77GHz</text>
            
            <!-- Lidar (Optional) -->
            <rect x="100" y="260" width="120" height="60" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" stroke-dasharray="5,5"/>
            <text x="160" y="285" font-size="14" font-weight="bold" text-anchor="middle">Lidar</text>
            <text x="160" y="305" font-size="11" text-anchor="middle">(Optional)</text>
            
            <!-- CAN Gateway -->
            <rect x="350" y="350" width="150" height="60" fill="#fff3e0" stroke="#ef6c00" stroke-width="2"/>
            <text x="425" y="375" font-size="14" font-weight="bold" text-anchor="middle">CAN Gateway</text>
            <text x="425" y="395" font-size="11" text-anchor="middle">Vehicle Interface</text>
            
            <!-- HMI Display -->
            <rect x="580" y="80" width="120" height="60" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2"/>
            <text x="640" y="105" font-size="14" font-weight="bold" text-anchor="middle">HMI Display</text>
            <text x="640" y="125" font-size="11" text-anchor="middle">Driver Interface</text>
            
            <!-- Brake ECU -->
            <rect x="580" y="170" width="120" height="60" fill="#fce4ec" stroke="#c2185b" stroke-width="2"/>
            <text x="640" y="195" font-size="14" font-weight="bold" text-anchor="middle">Brake ECU</text>
            <text x="640" y="215" font-size="11" text-anchor="middle">ABS/ESC Control</text>
            
            <!-- Steering ECU -->
            <rect x="580" y="260" width="120" height="60" fill="#fce4ec" stroke="#c2185b" stroke-width="2"/>
            <text x="640" y="285" font-size="14" font-weight="bold" text-anchor="middle">Steering ECU</text>
            <text x="640" y="305" font-size="11" text-anchor="middle">EPS Control</text>
            
            <!-- Power Management -->
            <rect x="100" y="380" width="120" height="50" fill="#ffebee" stroke="#d32f2f" stroke-width="2"/>
            <text x="160" y="400" font-size="14" font-weight="bold" text-anchor="middle">Power</text>
            <text x="160" y="415" font-size="11" text-anchor="middle">Management</text>
            
            <!-- Connections -->
            <!-- Camera to ECU -->
            <line x1="220" y1="110" x2="350" y2="220" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="280" y="160" font-size="10" fill="#666">MIPI CSI-2</text>
            
            <!-- Radar to ECU -->
            <line x1="220" y1="200" x2="350" y2="230" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="280" y="215" font-size="10" fill="#666">CAN-FD</text>
            
            <!-- Lidar to ECU -->
            <line x1="220" y1="290" x2="350" y2="250" stroke="#666" stroke-width="1" stroke-dasharray="3,3" marker-end="url(#arrowhead)"/>
            <text x="280" y="270" font-size="10" fill="#666">Ethernet</text>
            
            <!-- ECU to Display -->
            <line x1="500" y1="220" x2="580" y2="110" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="530" y="160" font-size="10" fill="#666">HDMI</text>
            
            <!-- ECU to Brake -->
            <line x1="500" y1="240" x2="580" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="530" y="220" font-size="10" fill="#666">CAN</text>
            
            <!-- ECU to Steering -->
            <line x1="500" y1="260" x2="580" y2="290" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="530" y="275" font-size="10" fill="#666">CAN</text>
            
            <!-- ECU to CAN Gateway -->
            <line x1="425" y1="280" x2="425" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="440" y="315" font-size="10" fill="#666">CAN</text>
            
            <!-- Power to ECU -->
            <line x1="220" y1="400" x2="350" y2="260" stroke="#d32f2f" stroke-width="2"/>
            <text x="270" y="340" font-size="10" fill="#d32f2f">12V Power</text>
            
            <!-- Arrow marker definition -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
                </marker>
            </defs>
            
            <!-- Legend -->
            <g transform="translate(50, 450)">
                <text x="0" y="0" font-size="12" font-weight="bold" fill="#333">Legend:</text>
                <rect x="60" y="-12" width="30" height="15" fill="#e3f2fd" stroke="#1565c0" stroke-width="1"/>
                <text x="95" y="0" font-size="11" fill="#333">Processing</text>
                
                <rect x="160" y="-12" width="30" height="15" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="1"/>
                <text x="195" y="0" font-size="11" fill="#333">Sensors</text>
                
                <rect x="250" y="-12" width="30" height="15" fill="#fce4ec" stroke="#c2185b" stroke-width="1"/>
                <text x="285" y="0" font-size="11" fill="#333">Actuators</text>
                
                <rect x="350" y="-12" width="30" height="15" fill="#fff3e0" stroke="#ef6c00" stroke-width="1"/>
                <text x="385" y="0" font-size="11" fill="#333">Interface</text>
            </g>
        </svg>
    </div>

    <div>
        <button onclick="downloadAsPNG()">Download as PNG</button>
        <button onclick="downloadAsSVG()">Download as SVG</button>
    </div>

    <script>
        function downloadAsSVG() {
            const svg = document.querySelector('svg');
            const svgData = new XMLSerializer().serializeToString(svg);
            const blob = new Blob([svgData], { type: 'image/svg+xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'adas-hardware-diagram.svg';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function downloadAsPNG() {
            const svg = document.querySelector('svg');
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const svgData = new XMLSerializer().serializeToString(svg);
            const img = new Image();
            
            canvas.width = 800;
            canvas.height = 500;
            
            img.onload = function() {
                ctx.drawImage(img, 0, 0);
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'adas-hardware-diagram.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                });
            };
            
            img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgData)));
        }
    </script>
</body>
</html>
